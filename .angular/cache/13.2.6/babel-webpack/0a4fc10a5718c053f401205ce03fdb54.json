{"ast":null,"code":"import _asyncToGenerator from \"/home/sparkout/Desktop/Hari/Sparkout/Angular/Angular_ZUKI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core'; // Connect Wallet\n\nimport Web3 from 'web3';\nimport WalletConnect from '@walletconnect/client';\nimport QRCodeModal from '@walletconnect/qrcode-modal'; // Set web3 and connector\n\nconst web3 = new Web3(window['ethereum']);\nconst connector = new WalletConnect({\n  bridge: 'https://bridge.walletconnect.org'\n});\nlet NavbarComponent = class NavbarComponent {\n  constructor(contractService, storageService, router) {\n    var _this = this;\n\n    this.contractService = contractService;\n    this.storageService = storageService;\n    this.router = router;\n    this.account = {};\n    this.showMobileMenu = false; // Meta mask connection\n\n    this.openMetamask = /*#__PURE__*/_asyncToGenerator(function* () {\n      _this.ethereum = window['ethereum'];\n\n      if (typeof _this.ethereum !== 'undefined') {}\n\n      const accounts = yield _this.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n\n      _this.setAccount(accounts[0], _this.ethereum.chainId, 'metamask');\n\n      _this.metamastListener(); // window.location.reload();\n\n    });\n    this.connectWallet = /*#__PURE__*/_asyncToGenerator(function* () {\n      // Create a connector\n      _this.connector = new WalletConnect({\n        bridge: 'https://bridge.walletconnect.org',\n        qrcodeModal: QRCodeModal\n      }); // Check if connection is already established\n\n      if (!_this.connector.connected) {\n        // create new session\n        _this.connector.createSession();\n      }\n\n      _this.wallectConnectListener();\n    });\n  }\n\n  toggleNavbar() {\n    this.showMobileMenu = !this.showMobileMenu;\n  }\n\n  ngOnInit() {\n    this.account = this.storageService.getItem('account') === null ? {\n      address: '',\n      network: '',\n      chainId: '',\n      provider: ''\n    } : JSON.parse(this.storageService.getItem('account') || '{}');\n    this.account.address = \"ConnectWallet\"; // this.setAccount(this.account.address, this.account.chainId, this.account.provider);\n  }\n\n  metamastListener() {\n    // Listener\n    this.ethereum.on('accountsChanged', accounts => {\n      this.setAccount(accounts[0], this.ethereum.chainId, 'metamask');\n    });\n    this.ethereum.on('chainChanged', chainId => {\n      this.setAccount(this.account.address, chainId, 'metamask');\n    });\n    this.storageService.setItem('walletconnect', '');\n  }\n\n  wallectConnectListener() {\n    // Subscribe to connection events\n    this.connector.on('connect', (error, payload) => {\n      // window.location.reload();\n      if (error) {\n        throw error;\n      } // Get provided accounts and chainId\n\n\n      const {\n        accounts,\n        chainId\n      } = payload.params[0];\n      this.setAccount(accounts[0], chainId, 'trustwallet');\n    });\n    this.connector.on('session_update', (error, payload) => {\n      if (error) {\n        throw error;\n      } // Get updated accounts and chainId\n\n\n      const {\n        accounts,\n        chainId\n      } = payload.params[0];\n      this.setAccount(accounts[0], chainId, 'trustwallet');\n    });\n    this.connector.on('disconnect', (error, payload) => {\n      if (error) {\n        throw error;\n      } // Delete connector\n\n\n      this.setAccount(' ', ' ', ' ');\n    });\n  }\n\n  setAccount(address, chainId, provider) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let account;\n\n      if (address != '' && address != undefined) {\n        const {\n          network,\n          key\n        } = yield _this2.setNetwork(chainId);\n        account = {\n          address: address,\n          chainId: chainId,\n          network,\n          key,\n          provider: provider\n        };\n      } else {\n        account = {\n          address: '',\n          network: '',\n          chainId: '',\n          provider: '',\n          key: ''\n        };\n      }\n\n      _this2.contractService.setAccount(account);\n\n      _this2.account = Object.assign({}, account);\n\n      _this2.storageService.setItem('account', JSON.stringify(_this2.account));\n\n      _this2.storageService.setItem('connecttedAddress', _this2.account.address);\n    })();\n  }\n\n  setNetwork(chainId) {\n    let network;\n    let key;\n\n    switch (chainId) {\n      case '0x1':\n      case 1:\n        network = 'Mainnet';\n        key = 'ETH';\n        break;\n\n      case '0x3':\n      case 3:\n        network = 'Ropsten';\n        key = 'ETH';\n        break;\n\n      case '0x4':\n      case 4:\n        network = 'Rinkeby';\n        key = 'ETH';\n        break;\n\n      case '0x38':\n      case 56:\n        network = 'BSC Mainnet';\n        key = 'BSC';\n        break;\n\n      case '0x61':\n      case 97:\n        network = 'BSC Testnet';\n        key = 'BSC';\n        break;\n\n      default:\n        network = 'Unknown';\n        break;\n    }\n\n    return {\n      network,\n      key\n    };\n  }\n\n};\nNavbarComponent = __decorate([Component({\n  selector: 'app-navbar',\n  templateUrl: './navbar.component.html',\n  styleUrls: ['./navbar.component.css']\n})], NavbarComponent);\nexport { NavbarComponent };\n\nfunction enableDarkTheme() {\n  throw new Error('Function not implemented.');\n}","map":{"version":3,"sources":["/home/sparkout/Desktop/Hari/Sparkout/Angular/Angular_ZUKI/src/app/sharedComponents/navbar/navbar.component.ts"],"names":["__decorate","Component","Web3","WalletConnect","QRCodeModal","web3","window","connector","bridge","NavbarComponent","constructor","contractService","storageService","router","account","showMobileMenu","openMetamask","ethereum","accounts","request","method","setAccount","chainId","metamastListener","connectWallet","qrcodeModal","connected","createSession","wallectConnectListener","toggleNavbar","ngOnInit","getItem","address","network","provider","JSON","parse","on","setItem","error","payload","params","undefined","key","setNetwork","Object","assign","stringify","selector","templateUrl","styleUrls","enableDarkTheme","Error"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\n// Connect Wallet\nimport Web3 from 'web3';\nimport WalletConnect from '@walletconnect/client';\nimport QRCodeModal from '@walletconnect/qrcode-modal';\n// Set web3 and connector\nconst web3 = new Web3(window['ethereum']);\nconst connector = new WalletConnect({\n    bridge: 'https://bridge.walletconnect.org',\n});\nlet NavbarComponent = class NavbarComponent {\n    constructor(contractService, storageService, router) {\n        this.contractService = contractService;\n        this.storageService = storageService;\n        this.router = router;\n        this.account = {};\n        this.showMobileMenu = false;\n        // Meta mask connection\n        this.openMetamask = async () => {\n            this.ethereum = window['ethereum'];\n            if (typeof this.ethereum !== 'undefined') {\n            }\n            const accounts = await this.ethereum.request({\n                method: 'eth_requestAccounts',\n            });\n            this.setAccount(accounts[0], this.ethereum.chainId, 'metamask');\n            this.metamastListener();\n            // window.location.reload();\n        };\n        this.connectWallet = async () => {\n            // Create a connector\n            this.connector = new WalletConnect({\n                bridge: 'https://bridge.walletconnect.org',\n                qrcodeModal: QRCodeModal,\n            });\n            // Check if connection is already established\n            if (!this.connector.connected) {\n                // create new session\n                this.connector.createSession();\n            }\n            this.wallectConnectListener();\n        };\n    }\n    toggleNavbar() {\n        this.showMobileMenu = !this.showMobileMenu;\n    }\n    ngOnInit() {\n        this.account =\n            this.storageService.getItem('account') === null\n                ? { address: '', network: '', chainId: '', provider: '' }\n                : JSON.parse(this.storageService.getItem('account') || '{}');\n        this.account.address = \"ConnectWallet\";\n        // this.setAccount(this.account.address, this.account.chainId, this.account.provider);\n    }\n    metamastListener() {\n        // Listener\n        this.ethereum.on('accountsChanged', (accounts) => {\n            this.setAccount(accounts[0], this.ethereum.chainId, 'metamask');\n        });\n        this.ethereum.on('chainChanged', (chainId) => {\n            this.setAccount(this.account.address, chainId, 'metamask');\n        });\n        this.storageService.setItem('walletconnect', '');\n    }\n    wallectConnectListener() {\n        // Subscribe to connection events\n        this.connector.on('connect', (error, payload) => {\n            // window.location.reload();\n            if (error) {\n                throw error;\n            }\n            // Get provided accounts and chainId\n            const { accounts, chainId } = payload.params[0];\n            this.setAccount(accounts[0], chainId, 'trustwallet');\n        });\n        this.connector.on('session_update', (error, payload) => {\n            if (error) {\n                throw error;\n            }\n            // Get updated accounts and chainId\n            const { accounts, chainId } = payload.params[0];\n            this.setAccount(accounts[0], chainId, 'trustwallet');\n        });\n        this.connector.on('disconnect', (error, payload) => {\n            if (error) {\n                throw error;\n            }\n            // Delete connector\n            this.setAccount(' ', ' ', ' ');\n        });\n    }\n    async setAccount(address, chainId, provider) {\n        let account;\n        if (address != '' && address != undefined) {\n            const { network, key } = await this.setNetwork(chainId);\n            account = {\n                address: address,\n                chainId: chainId,\n                network,\n                key,\n                provider: provider,\n            };\n        }\n        else {\n            account = {\n                address: '',\n                network: '',\n                chainId: '',\n                provider: '',\n                key: '',\n            };\n        }\n        this.contractService.setAccount(account);\n        this.account = Object.assign({}, account);\n        this.storageService.setItem('account', JSON.stringify(this.account));\n        this.storageService.setItem('connecttedAddress', this.account.address);\n    }\n    setNetwork(chainId) {\n        let network;\n        let key;\n        switch (chainId) {\n            case '0x1':\n            case 1:\n                network = 'Mainnet';\n                key = 'ETH';\n                break;\n            case '0x3':\n            case 3:\n                network = 'Ropsten';\n                key = 'ETH';\n                break;\n            case '0x4':\n            case 4:\n                network = 'Rinkeby';\n                key = 'ETH';\n                break;\n            case '0x38':\n            case 56:\n                network = 'BSC Mainnet';\n                key = 'BSC';\n                break;\n            case '0x61':\n            case 97:\n                network = 'BSC Testnet';\n                key = 'BSC';\n                break;\n            default:\n                network = 'Unknown';\n                break;\n        }\n        return { network, key };\n    }\n};\nNavbarComponent = __decorate([\n    Component({\n        selector: 'app-navbar',\n        templateUrl: './navbar.component.html',\n        styleUrls: ['./navbar.component.css'],\n    })\n], NavbarComponent);\nexport { NavbarComponent };\nfunction enableDarkTheme() {\n    throw new Error('Function not implemented.');\n}\n"]},"metadata":{},"sourceType":"module"}