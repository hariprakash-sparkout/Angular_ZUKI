{"ast":null,"code":"import _asyncToGenerator from \"/home/sparkout/Desktop/Hari/Sparkout/Angular/Angular_ZUKI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { interval } from \"rxjs\"; // import 'rxjs/add/observable/interval';\n\nimport Web3 from \"web3\";\nimport { abi, approveABI } from \"../../helpers/helper\";\n\nconst contractAbi = require(\"src/contracts/contract.abi.json\");\n\nconst web3 = new Web3(window[\"ethereum\"]);\nlet StakeComponent = class StakeComponent {\n  constructor(storagService) {\n    this.storagService = storagService;\n    this.viewMode = \"onGoing\";\n    this.showPoolInfo = true;\n    this.depositToken = 100;\n    this.isApproveContractShown = false;\n    this.isConfirmationShown = false;\n    this.isUploadShown = false;\n    this.poolLength = 0;\n    this.contractAddress = \"0xF395f96913dCd9e3AEEbBb8d82eE47F5A3ACc4c8\";\n    this.approveAddress = \"0x2811dE52B41267D6FD126B4F8d0ac2248E1C9624\";\n    this.poolsOngoing = [];\n    this.poolsUpcoming = [];\n    this.poolsClaim = [];\n    this.poolsCompleted = [];\n    this.poolsMyDeal = [];\n    this.activeIndex = -1;\n    this.showLive = false; // dealsId: any = 0;\n\n    this.countDown = [];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      // this.web3Service.connect();\n      console.log(contractAbi);\n      _this.contract = yield new web3.eth.Contract(abi, _this.contractAddress);\n      console.log(_this.contract);\n      yield _this.setPoolLength();\n      yield _this.createPath();\n      const obs$ = yield interval(1000);\n      obs$.subscribe(d => {\n        _this.transform(1, 1);\n      });\n    })();\n  }\n\n  createPath() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      for (let i = 0; i < _this2.poolLength; i++) {\n        var nm = 2;\n\n        var count = _this2.countDown.push(nm);\n\n        console.log(count);\n      }\n    })();\n  }\n\n  calculateTime() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      for (let i = 0; i < _this3.poolLength; i++) {\n        const userInfo = yield _this3.contract.methods.userInfo(i, localStorage.getItem(\"connecttedAddress\")).call({\n          from: localStorage.getItem(\"connecttedAddress\")\n        });\n        const poolInfo = yield _this3.contract.methods.poolInfo(i).call();\n      }\n    })();\n  }\n\n  transform(i, id) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      for (let i = 0; i < _this4.poolLength; i++) {\n        var stakedAmount = yield _this4.contract.methods.getUserStakedTokenInPool(i).call({\n          from: localStorage.getItem(\"connecttedAddress\")\n        });\n        console.log(stakedAmount);\n        const userInfo = yield _this4.contract.methods.userInfo(i, localStorage.getItem(\"connecttedAddress\")).call({\n          from: localStorage.getItem(\"connecttedAddress\")\n        });\n        const poolInfo = yield _this4.contract.methods.poolInfo(i).call();\n        var currentTime = yield Math.floor(Date.now() / 1000);\n        let future = new Date(userInfo.stakingEndTime * 1000);\n        let now = new Date();\n        let diff = future - now;\n        let days = Math.floor(diff / (1000 * 60 * 60 * 24));\n        let hours = Math.floor(diff / (1000 * 60 * 60));\n        let mins = Math.floor(diff / (1000 * 60));\n        let secs = Math.floor(diff / 1000);\n        let d = days;\n        let h = hours - days * 24;\n        let m = mins - hours * 60;\n        let s = secs - mins * 60;\n        console.log(d + \":\" + h + \":\" + m + \":\" + s);\n        var stakedAmount = yield _this4.contract.methods.getUserStakedTokenInPool(i).call({\n          from: localStorage.getItem(\"connecttedAddress\")\n        });\n        console.log(stakedAmount);\n\n        if (currentTime > poolInfo.endTime && currentTime > poolInfo.startTime) {\n          if (stakedAmount > 0 && userInfo.stakingEndTime < currentTime) {\n            _this4.countDown[i] = \"Please Claim The Reward\";\n          } else if (stakedAmount == 0) {\n            _this4.countDown[i] = \"No reward to Claim\";\n          } else {\n            _this4.countDown[i] = d + \":\" + h + \":\" + m + \":\" + s;\n          }\n\n          console.log(\"completed\");\n        } else if (currentTime < poolInfo.startTime && currentTime < poolInfo.endTime) {\n          console.log(\"upcoming\");\n        } else if (currentTime < poolInfo.endTime && currentTime > poolInfo.startTime) {\n          if (stakedAmount > 0 && userInfo.stakingEndTime < currentTime) {\n            _this4.countDown[i] = \"Please Claim The Reward\";\n          } else if (stakedAmount == 0) {\n            _this4.countDown[i] = \"No tokens staked\";\n          } else {\n            _this4.countDown[i] = d + \":\" + h + \":\" + m + \":\" + s;\n          }\n\n          poolInfo[\"poolsStatus\"] = \"ongoing\";\n        }\n\n        if (stakedAmount > 0) {}\n\n        if (userInfo.isStaking && userInfo.stakingEndTime < currentTime) {}\n      }\n    })();\n  }\n\n  setPoolLength() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      _this5.poolLength = yield _this5.contract.methods.poolLength().call();\n      console.log(_this5.poolLength);\n\n      _this5.syncPool();\n    })();\n  }\n  /**\n   * on toggle between live/completed\n   * @param{string}sectionName\n   */\n\n\n  onToggle(sectionName) {\n    this.viewMode = sectionName;\n    this.viewMode === \"onGoing\" ? this.showLive = true : this.showLive = false;\n    console.log(this.showLive);\n  }\n\n  syncPool() {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      for (let i = 0; i < _this6.poolLength; i++) {\n        const poolInfo = yield _this6.contract.methods.poolInfo(i).call();\n        const stakedInpoolInfo = yield _this6.contract.methods.getTotalStakedInPool(i).call();\n        const userInfo = yield _this6.contract.methods.userInfo(i, localStorage.getItem(\"connecttedAddress\")).call({\n          from: localStorage.getItem(\"connecttedAddress\")\n        });\n        console.log(\"userINfo\", userInfo);\n        console.log(\"poolInfo\", poolInfo);\n\n        _this6.calaculation(poolInfo, userInfo, stakedInpoolInfo, i);\n      }\n    })();\n  }\n\n  calaculation(poolInfo, userInfo, stakedInpoolInfo, _pid) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      let EndTime = new Date(poolInfo.endTime * 1000);\n      let startTime = new Date(poolInfo.startTime * 1000);\n      poolInfo.readableEndTime = EndTime.getDate() + \"/\" + EndTime.getMonth() + \"/\" + EndTime.getFullYear() + \" , \" + EndTime.getHours() + \":\" + EndTime.getMinutes() + \":\" + EndTime.getSeconds();\n      poolInfo.readableStartTime = startTime.getDate() + \"/\" + startTime.getMonth() + \"/\" + startTime.getFullYear() + \" , \" + startTime.getHours() + \":\" + startTime.getMinutes() + \":\" + startTime.getSeconds();\n      let lockPeriodSec = poolInfo.duration * 60;\n      var d = Math.floor(lockPeriodSec / (3600 * 24));\n      var h = Math.floor(lockPeriodSec % (3600 * 24) / 3600);\n      var m = Math.floor(lockPeriodSec % 3600 / 60);\n      var s = Math.floor(lockPeriodSec % 60);\n      poolInfo.lockPeriod = d + \"d: \" + h + \"h: \" + m + \"m: \" + s;\n      poolInfo.stakebleAmount = (yield poolInfo.poolStakableAmount) / 10 ** 18;\n      poolInfo.stakedInPool = (yield stakedInpoolInfo) / 10 ** 18;\n      poolInfo.stakedPercentage = (yield poolInfo.stakedInPool / poolInfo.stakebleAmount) * 100;\n      console.log(poolInfo.duration);\n      var currentTime = yield Math.floor(Date.now() / 1000);\n      console.log(currentTime);\n      console.log(poolInfo.endTime);\n      var stakedAmount = yield _this7.contract.methods.getUserStakedTokenInPool(_pid).call({\n        from: localStorage.getItem(\"connecttedAddress\")\n      });\n      console.log(stakedAmount);\n      poolInfo.userStakedAmount = stakedAmount / 10 ** 18;\n      let userStakeEndTime = new Date(userInfo.stakingEndTime * 1000); // poolInfo.countDown = 0\n\n      poolInfo.userStakeEndTime = userStakeEndTime.getDate() + \"/\" + userStakeEndTime.getMonth() + \"/\" + userStakeEndTime.getFullYear() + \" , \" + userStakeEndTime.getHours() + \":\" + userStakeEndTime.getMinutes() + \":\" + userStakeEndTime.getSeconds();\n      poolInfo.userExpectedReward = userInfo.expectedReward / 10 ** 18;\n      poolInfo.poolId = _pid;\n\n      if (currentTime > poolInfo.endTime && currentTime > poolInfo.startTime) {\n        _this7.poolsCompleted.push(poolInfo);\n\n        poolInfo[\"poolsStatus\"] = \"completed\";\n        console.log(\"completed\");\n      } else if (currentTime < poolInfo.startTime && currentTime < poolInfo.endTime) {\n        _this7.poolsUpcoming.push(poolInfo);\n\n        poolInfo[\"poolsStatus\"] = \"upcoming\";\n        console.log(\"upcoming\");\n      } else if (currentTime < poolInfo.endTime && currentTime > poolInfo.startTime) {\n        _this7.poolsOngoing.push(poolInfo);\n\n        console.log(\"Ongoing\");\n        poolInfo[\"poolsStatus\"] = \"ongoing\";\n      }\n\n      if (stakedAmount > 0) {\n        _this7.poolsMyDeal.push(poolInfo);\n      }\n\n      if (userInfo.isStaking && userInfo.stakingEndTime < currentTime) {\n        _this7.poolsClaim.push(poolInfo);\n      }\n    })();\n  }\n\n  stakeToken(_pid) {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      _this8.contract = new web3.eth.Contract(abi, _this8.contractAddress);\n      _this8.approveContract = new web3.eth.Contract(approveABI, _this8.approveAddress);\n      console.log(_pid);\n      let approveToken = yield _this8.approveContract.methods.approve(_this8.contractAddress, BigInt(_this8.depositToken * 10 ** 18)).send({\n        from: localStorage.getItem(\"connecttedAddress\")\n      }).then(receipt => {\n        console.log(receipt);\n      });\n      let stakeToken = yield _this8.contract.methods.stakeTokens(_pid, BigInt(_this8.depositToken * 10 ** 18)).send({\n        from: localStorage.getItem(\"connecttedAddress\")\n      }).then(receipt => {\n        console.log(receipt);\n      });\n    })();\n  }\n\n  ClaimToken(_pid) {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      let claimToken = yield _this9.contract.methods.withdrawAll(_pid).send({\n        from: localStorage.getItem(\"connecttedAddress\")\n      }).then(receipt => {\n        console.log(receipt);\n      });\n    })();\n  }\n\n  togglePoolInfo() {\n    this.showPoolInfo = !this.showPoolInfo;\n  }\n\n  openContractModal() {\n    this.isApproveContractShown = true;\n  }\n\n  closeContractModal() {\n    this.isApproveContractShown = false;\n  }\n\n  openConfirmation() {\n    this.isConfirmationShown = true;\n    setTimeout(() => {\n      this.isConfirmationShown = false;\n      this.isUploadShown = true;\n    }, 1000);\n  }\n\n  closeConfirmation() {\n    this.isUploadShown = false;\n  }\n\n};\nStakeComponent = __decorate([Component({\n  selector: \"app-stake\",\n  templateUrl: \"./stake.component.html\",\n  styleUrls: [\"./stake.component.css\"]\n})], StakeComponent);\nexport { StakeComponent };","map":{"version":3,"sources":["/home/sparkout/Desktop/Hari/Sparkout/Angular/Angular_ZUKI/src/app/pageComponents/stake/stake.component.ts"],"names":["__decorate","Component","interval","Web3","abi","approveABI","contractAbi","require","web3","window","StakeComponent","constructor","storagService","viewMode","showPoolInfo","depositToken","isApproveContractShown","isConfirmationShown","isUploadShown","poolLength","contractAddress","approveAddress","poolsOngoing","poolsUpcoming","poolsClaim","poolsCompleted","poolsMyDeal","activeIndex","showLive","countDown","ngOnInit","console","log","contract","eth","Contract","setPoolLength","createPath","obs$","subscribe","d","transform","i","nm","count","push","calculateTime","userInfo","methods","localStorage","getItem","call","from","poolInfo","id","stakedAmount","getUserStakedTokenInPool","currentTime","Math","floor","Date","now","future","stakingEndTime","diff","days","hours","mins","secs","h","m","s","endTime","startTime","isStaking","syncPool","onToggle","sectionName","stakedInpoolInfo","getTotalStakedInPool","calaculation","_pid","EndTime","readableEndTime","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","readableStartTime","lockPeriodSec","duration","lockPeriod","stakebleAmount","poolStakableAmount","stakedInPool","stakedPercentage","userStakedAmount","userStakeEndTime","userExpectedReward","expectedReward","poolId","stakeToken","approveContract","approveToken","approve","BigInt","send","then","receipt","stakeTokens","ClaimToken","claimToken","withdrawAll","togglePoolInfo","openContractModal","closeContractModal","openConfirmation","setTimeout","closeConfirmation","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { interval } from \"rxjs\";\n// import 'rxjs/add/observable/interval';\nimport Web3 from \"web3\";\nimport { abi, approveABI } from \"../../helpers/helper\";\nconst contractAbi = require(\"src/contracts/contract.abi.json\");\nconst web3 = new Web3(window[\"ethereum\"]);\nlet StakeComponent = class StakeComponent {\n    constructor(storagService) {\n        this.storagService = storagService;\n        this.viewMode = \"onGoing\";\n        this.showPoolInfo = true;\n        this.depositToken = 100;\n        this.isApproveContractShown = false;\n        this.isConfirmationShown = false;\n        this.isUploadShown = false;\n        this.poolLength = 0;\n        this.contractAddress = \"0xF395f96913dCd9e3AEEbBb8d82eE47F5A3ACc4c8\";\n        this.approveAddress = \"0x2811dE52B41267D6FD126B4F8d0ac2248E1C9624\";\n        this.poolsOngoing = [];\n        this.poolsUpcoming = [];\n        this.poolsClaim = [];\n        this.poolsCompleted = [];\n        this.poolsMyDeal = [];\n        this.activeIndex = -1;\n        this.showLive = false;\n        // dealsId: any = 0;\n        this.countDown = [];\n    }\n    async ngOnInit() {\n        // this.web3Service.connect();\n        console.log(contractAbi);\n        this.contract = await new web3.eth.Contract(abi, this.contractAddress);\n        console.log(this.contract);\n        await this.setPoolLength();\n        await this.createPath();\n        const obs$ = await interval(1000);\n        obs$.subscribe((d) => {\n            this.transform(1, 1);\n        });\n    }\n    async createPath() {\n        for (let i = 0; i < this.poolLength; i++) {\n            var nm = 2;\n            var count = this.countDown.push(nm);\n            console.log(count);\n        }\n    }\n    async calculateTime() {\n        for (let i = 0; i < this.poolLength; i++) {\n            const userInfo = await this.contract.methods\n                .userInfo(i, localStorage.getItem(\"connecttedAddress\"))\n                .call({ from: localStorage.getItem(\"connecttedAddress\") });\n            const poolInfo = await this.contract.methods.poolInfo(i).call();\n        }\n    }\n    async transform(i, id) {\n        for (let i = 0; i < this.poolLength; i++) {\n            var stakedAmount = await this.contract.methods\n                .getUserStakedTokenInPool(i)\n                .call({ from: localStorage.getItem(\"connecttedAddress\") });\n            console.log(stakedAmount);\n            const userInfo = await this.contract.methods\n                .userInfo(i, localStorage.getItem(\"connecttedAddress\"))\n                .call({ from: localStorage.getItem(\"connecttedAddress\") });\n            const poolInfo = await this.contract.methods.poolInfo(i).call();\n            var currentTime = await Math.floor(Date.now() / 1000);\n            let future = new Date(userInfo.stakingEndTime * 1000);\n            let now = new Date();\n            let diff = future - now;\n            let days = Math.floor(diff / (1000 * 60 * 60 * 24));\n            let hours = Math.floor(diff / (1000 * 60 * 60));\n            let mins = Math.floor(diff / (1000 * 60));\n            let secs = Math.floor(diff / 1000);\n            let d = days;\n            let h = hours - days * 24;\n            let m = mins - hours * 60;\n            let s = secs - mins * 60;\n            console.log(d + \":\" + h + \":\" + m + \":\" + s);\n            var stakedAmount = await this.contract.methods\n                .getUserStakedTokenInPool(i)\n                .call({ from: localStorage.getItem(\"connecttedAddress\") });\n            console.log(stakedAmount);\n            if (currentTime > poolInfo.endTime && currentTime > poolInfo.startTime) {\n                if (stakedAmount > 0 && userInfo.stakingEndTime < currentTime) {\n                    this.countDown[i] = \"Please Claim The Reward\";\n                }\n                else if (stakedAmount == 0) {\n                    this.countDown[i] = \"No reward to Claim\";\n                }\n                else {\n                    this.countDown[i] = d + \":\" + h + \":\" + m + \":\" + s;\n                }\n                console.log(\"completed\");\n            }\n            else if (currentTime < poolInfo.startTime &&\n                currentTime < poolInfo.endTime) {\n                console.log(\"upcoming\");\n            }\n            else if (currentTime < poolInfo.endTime &&\n                currentTime > poolInfo.startTime) {\n                if (stakedAmount > 0 && userInfo.stakingEndTime < currentTime) {\n                    this.countDown[i] = \"Please Claim The Reward\";\n                }\n                else if (stakedAmount == 0) {\n                    this.countDown[i] = \"No tokens staked\";\n                }\n                else {\n                    this.countDown[i] = d + \":\" + h + \":\" + m + \":\" + s;\n                }\n                poolInfo[\"poolsStatus\"] = \"ongoing\";\n            }\n            if (stakedAmount > 0) {\n            }\n            if (userInfo.isStaking && userInfo.stakingEndTime < currentTime) {\n            }\n        }\n    }\n    async setPoolLength() {\n        this.poolLength = await this.contract.methods.poolLength().call();\n        console.log(this.poolLength);\n        this.syncPool();\n    }\n    /**\n     * on toggle between live/completed\n     * @param{string}sectionName\n     */\n    onToggle(sectionName) {\n        this.viewMode = sectionName;\n        this.viewMode === \"onGoing\"\n            ? (this.showLive = true)\n            : (this.showLive = false);\n        console.log(this.showLive);\n    }\n    async syncPool() {\n        for (let i = 0; i < this.poolLength; i++) {\n            const poolInfo = await this.contract.methods.poolInfo(i).call();\n            const stakedInpoolInfo = await this.contract.methods\n                .getTotalStakedInPool(i)\n                .call();\n            const userInfo = await this.contract.methods\n                .userInfo(i, localStorage.getItem(\"connecttedAddress\"))\n                .call({ from: localStorage.getItem(\"connecttedAddress\") });\n            console.log(\"userINfo\", userInfo);\n            console.log(\"poolInfo\", poolInfo);\n            this.calaculation(poolInfo, userInfo, stakedInpoolInfo, i);\n        }\n    }\n    async calaculation(poolInfo, userInfo, stakedInpoolInfo, _pid) {\n        let EndTime = new Date(poolInfo.endTime * 1000);\n        let startTime = new Date(poolInfo.startTime * 1000);\n        poolInfo.readableEndTime =\n            EndTime.getDate() +\n                \"/\" +\n                EndTime.getMonth() +\n                \"/\" +\n                EndTime.getFullYear() +\n                \" , \" +\n                EndTime.getHours() +\n                \":\" +\n                EndTime.getMinutes() +\n                \":\" +\n                EndTime.getSeconds();\n        poolInfo.readableStartTime =\n            startTime.getDate() +\n                \"/\" +\n                startTime.getMonth() +\n                \"/\" +\n                startTime.getFullYear() +\n                \" , \" +\n                startTime.getHours() +\n                \":\" +\n                startTime.getMinutes() +\n                \":\" +\n                startTime.getSeconds();\n        let lockPeriodSec = poolInfo.duration * 60;\n        var d = Math.floor(lockPeriodSec / (3600 * 24));\n        var h = Math.floor((lockPeriodSec % (3600 * 24)) / 3600);\n        var m = Math.floor((lockPeriodSec % 3600) / 60);\n        var s = Math.floor(lockPeriodSec % 60);\n        poolInfo.lockPeriod = d + \"d: \" + h + \"h: \" + m + \"m: \" + s;\n        poolInfo.stakebleAmount = (await poolInfo.poolStakableAmount) / 10 ** 18;\n        poolInfo.stakedInPool = (await stakedInpoolInfo) / 10 ** 18;\n        poolInfo.stakedPercentage =\n            (await (poolInfo.stakedInPool / poolInfo.stakebleAmount)) * 100;\n        console.log(poolInfo.duration);\n        var currentTime = await Math.floor(Date.now() / 1000);\n        console.log(currentTime);\n        console.log(poolInfo.endTime);\n        var stakedAmount = await this.contract.methods\n            .getUserStakedTokenInPool(_pid)\n            .call({ from: localStorage.getItem(\"connecttedAddress\") });\n        console.log(stakedAmount);\n        poolInfo.userStakedAmount = stakedAmount / 10 ** 18;\n        let userStakeEndTime = new Date(userInfo.stakingEndTime * 1000);\n        // poolInfo.countDown = 0\n        poolInfo.userStakeEndTime =\n            userStakeEndTime.getDate() +\n                \"/\" +\n                userStakeEndTime.getMonth() +\n                \"/\" +\n                userStakeEndTime.getFullYear() +\n                \" , \" +\n                userStakeEndTime.getHours() +\n                \":\" +\n                userStakeEndTime.getMinutes() +\n                \":\" +\n                userStakeEndTime.getSeconds();\n        poolInfo.userExpectedReward = userInfo.expectedReward / 10 ** 18;\n        poolInfo.poolId = _pid;\n        if (currentTime > poolInfo.endTime && currentTime > poolInfo.startTime) {\n            this.poolsCompleted.push(poolInfo);\n            poolInfo[\"poolsStatus\"] = \"completed\";\n            console.log(\"completed\");\n        }\n        else if (currentTime < poolInfo.startTime &&\n            currentTime < poolInfo.endTime) {\n            this.poolsUpcoming.push(poolInfo);\n            poolInfo[\"poolsStatus\"] = \"upcoming\";\n            console.log(\"upcoming\");\n        }\n        else if (currentTime < poolInfo.endTime &&\n            currentTime > poolInfo.startTime) {\n            this.poolsOngoing.push(poolInfo);\n            console.log(\"Ongoing\");\n            poolInfo[\"poolsStatus\"] = \"ongoing\";\n        }\n        if (stakedAmount > 0) {\n            this.poolsMyDeal.push(poolInfo);\n        }\n        if (userInfo.isStaking && userInfo.stakingEndTime < currentTime) {\n            this.poolsClaim.push(poolInfo);\n        }\n    }\n    async stakeToken(_pid) {\n        this.contract = new web3.eth.Contract(abi, this.contractAddress);\n        this.approveContract = new web3.eth.Contract(approveABI, this.approveAddress);\n        console.log(_pid);\n        let approveToken = await this.approveContract.methods\n            .approve(this.contractAddress, BigInt(this.depositToken * 10 ** 18))\n            .send({ from: localStorage.getItem(\"connecttedAddress\") })\n            .then((receipt) => {\n            console.log(receipt);\n        });\n        let stakeToken = await this.contract.methods\n            .stakeTokens(_pid, BigInt(this.depositToken * 10 ** 18))\n            .send({ from: localStorage.getItem(\"connecttedAddress\") })\n            .then((receipt) => {\n            console.log(receipt);\n        });\n    }\n    async ClaimToken(_pid) {\n        let claimToken = await this.contract.methods\n            .withdrawAll(_pid)\n            .send({ from: localStorage.getItem(\"connecttedAddress\") })\n            .then((receipt) => {\n            console.log(receipt);\n        });\n    }\n    togglePoolInfo() {\n        this.showPoolInfo = !this.showPoolInfo;\n    }\n    openContractModal() {\n        this.isApproveContractShown = true;\n    }\n    closeContractModal() {\n        this.isApproveContractShown = false;\n    }\n    openConfirmation() {\n        this.isConfirmationShown = true;\n        setTimeout(() => {\n            this.isConfirmationShown = false;\n            this.isUploadShown = true;\n        }, 1000);\n    }\n    closeConfirmation() {\n        this.isUploadShown = false;\n    }\n};\nStakeComponent = __decorate([\n    Component({\n        selector: \"app-stake\",\n        templateUrl: \"./stake.component.html\",\n        styleUrls: [\"./stake.component.css\"],\n    })\n], StakeComponent);\nexport { StakeComponent };\n"]},"metadata":{},"sourceType":"module"}